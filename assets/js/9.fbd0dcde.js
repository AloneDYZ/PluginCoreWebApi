(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{373:function(n,e,t){"use strict";t.r(e);var s=t(45),r=Object(s.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指南"}},[n._v("#")]),n._v(" 指南")]),n._v(" "),t("h2",{attrs:{id:"一分钟集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一分钟集成"}},[n._v("#")]),n._v(" 一分钟集成")]),n._v(" "),t("p",[n._v("推荐使用 "),t("a",{attrs:{href:"https://www.nuget.org/packages/PluginCore",target:"_blank",rel:"noopener noreferrer"}},[n._v("NuGet"),t("OutboundLink")],1),n._v(", 在你项目的根目录 执行下方的命令, 如果你使用 Visual Studio, 这时依次点击 "),t("strong",[n._v("Tools")]),n._v(" -> "),t("strong",[n._v("NuGet Package Manager")]),n._v(" -> "),t("strong",[n._v("Package Manager Console")]),n._v(' , 确保 "Default project" 是你想要安装的项目, 输入下方的命令进行安装.')]),n._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[n._v("PM"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(" Install-Package PluginCore\n")])])]),t("blockquote",[t("p",[n._v("在你的 ASP.NET Core 应用程序中修改代码")]),n._v(" "),t("p",[n._v("Startup.cs")])]),n._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("using PluginCore.Extensions;\n\n// This method gets called by the runtime. Use this method to add services to the container.\npublic void ConfigureServices(IServiceCollection services)\n{\n    services.AddControllers();\n\n    // 1. 添加 PluginCore\n    services.AddPluginCore();\n}\n\n// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\npublic void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n\n    app.UseHttpsRedirection();\n\n    app.UseRouting();\n\n    // 2. 使用 PluginCore\n    app.UsePluginCore();\n\n    app.UseAuthorization();\n\n    app.UseEndpoints(endpoints =>\n    {\n        endpoints.MapControllers();\n    });\n}\n")])])]),t("blockquote",[t("p",[n._v("现在访问 https://localhost:5001/PluginCore/Admin 即可进入 PluginCore Admin"),t("br"),n._v("\nhttps://localhost:5001 需改为你的地址")])]),n._v(" "),t("h3",{attrs:{id:"注意"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[n._v("#")]),n._v(" 注意")]),n._v(" "),t("p",[n._v("请登录 "),t("code",[n._v("PluginCore Admin")]),n._v(" 后，为了安全，及时修改默认用户名，密码:")]),n._v(" "),t("p",[t("code",[n._v("App_Data/PluginCore.Config.json")])]),n._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[n._v('"Admin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[n._v('"UserName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[n._v('"Password"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"ABC12345"')]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[n._v('"FrontendMode"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"LocalEmbedded"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[n._v('"RemoteFrontend"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"https://cdn.jsdelivr.net/gh/yiyungent/plugincore-admin-frontend@0.1.2/dist-cdn"')]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])])]),t("p",[n._v("修改后，立即生效，无需重启站点，需重新登录 "),t("code",[n._v("PluginCore Admin")])]),n._v(" "),t("h3",{attrs:{id:"添加插件钩子-并应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加插件钩子-并应用"}},[n._v("#")]),n._v(" 添加插件钩子, 并应用")]),n._v(" "),t("blockquote",[t("p",[n._v("1.例如，自定义插件钩子: "),t("code",[n._v("ITestPlugin")])])]),n._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("using PluginCore.IPlugins;\n\nnamespace PluginCore.IPlugins\n{\n    public interface ITestPlugin : IPlugin\n    {\n        string Say();\n    }\n}\n")])])]),t("blockquote",[t("p",[n._v("2.在需要激活的地方，应用钩子，这样所有启用的插件中，实现了 "),t("code",[n._v("ITestPlugin")]),n._v(" 的插件，都将调用 "),t("code",[n._v("Say()")])])]),n._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('using PluginCore;\nusing PluginCore.IPlugins;\n\nnamespace WebApi.Controllers\n{\n    [Route("api/[controller]")]\n    [ApiController]\n    public class TestController : ControllerBase\n    {\n        private readonly PluginFinder _pluginFinder;\n\n        public TestController(PluginFinder pluginFinder)\n        {\n            _pluginFinder = pluginFinder;\n        }\n\n        public ActionResult Get()\n        {\n            //var plugins = PluginFinder.EnablePlugins<BasePlugin>().ToList();\n            // 所有实现了 ITestPlugin 的已启用插件\n            var plugins2 = _pluginFinder.EnablePlugins<ITestPlugin>().ToList();\n\n            foreach (var item in plugins2)\n            {\n                // 调用\n                string words = item.Say();\n                Console.WriteLine(words);\n            }\n\n            return Ok("");\n        }\n    }\n}\n')])])]),t("h3",{attrs:{id:"自定义前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义前端"}},[n._v("#")]),n._v(" 自定义前端")]),n._v(" "),t("p",[n._v("PluginCore 支持3种前端文件加载方式")]),n._v(" "),t("blockquote",[t("p",[n._v("配置文件 "),t("code",[n._v("App_Data/PluginCore.Config.json")]),n._v(" 中 "),t("code",[n._v("FrontendMode")])])]),n._v(" "),t("ol",[t("li",[n._v("LocalEmbedded")])]),n._v(" "),t("ul",[t("li",[n._v("默认, 嵌入式资源，前端文件打包进dll, 此模式下, 不容易自定义前端文件，需要修改 "),t("code",[n._v("PluginCore")]),n._v(" 源代码，重新编译，不建议")])]),n._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[n._v("LocalFolder")])]),n._v(" "),t("ul",[t("li",[n._v("在集成了 "),t("code",[n._v("PluginCore")]),n._v(" 的 ASP.NET Core 项目中, 新建 "),t("code",[n._v("PluginCoreAdmin")]),n._v(", 将前端文件放入此文件夹")])]),n._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[n._v("RemoteCDN")])]),n._v(" "),t("ul",[t("li",[n._v("使用远程cdn资源, 可通过 配置文件中 "),t("code",[n._v("RemoteFrontend")]),n._v(" 指定url")])]),n._v(" "),t("blockquote",[t("p",[t("strong",[n._v("注意:")]),t("br"),n._v("\n更新 "),t("code",[n._v("FrontendMode")]),n._v(", 需重启站点后, 才能生效")])]),n._v(" "),t("h3",{attrs:{id:"补充"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[n._v("#")]),n._v(" 补充")]),n._v(" "),t("blockquote",[t("p",[t("strong",[n._v("补充")])]),n._v(" "),t("p",[n._v("开发插件只需要, 添加对 "),t("code",[n._v("PluginCore.IPlugins")]),n._v(" 包 (插件sdk) 的引用即可，")]),n._v(" "),t("p",[n._v("当然如果你需要 "),t("code",[n._v("PluginCore")]),n._v(" ,  也可以添加引用")])]),n._v(" "),t("blockquote",[t("p",[t("strong",[n._v("规范")])]),n._v(" "),t("ol",[t("li",[n._v("插件sdk")])]),n._v(" "),t("p",[n._v("插件接口应当位于 "),t("code",[n._v("PluginCore.IPlugins")]),n._v(" 命名空间，这是规范，不强求，但建议这么做，")]),n._v(" "),t("p",[n._v("程序集名不一定要与命名空间名相同，你完全在你的插件sdk程序集中，使用 "),t("code",[n._v("PluginCore.IPlugins")]),n._v(" 命名空间。")]),n._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[n._v("插件")])]),n._v(" "),t("p",[n._v("插件程序集名(一般=项目(Project)名) 与 插件 "),t("code",[n._v("info.json")]),n._v(" 中 "),t("code",[n._v("PluginId")]),n._v(" 一致, 例如: Project: "),t("code",[n._v("HelloWorldPlugin")]),n._v(", PluginId: "),t("code",[n._v("HelloWorldPlugin")]),n._v(",  此项必须，否则插件无法加载\n"),t("code",[n._v("PluginId")]),n._v(" 为插件唯一标识")])]),n._v(" "),t("h2",{attrs:{id:"环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[n._v("#")]),n._v(" 环境")]),n._v(" "),t("ul",[t("li",[n._v("运行环境: .NET Core 3.1 (+)")]),n._v(" "),t("li",[n._v("开发环境: Visual Studio Community 2019")])])])}),[],!1,null,null,null);e.default=r.exports}}]);